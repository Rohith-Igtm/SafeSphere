<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeSphere - Safety Reviews & Contacts</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span>SafeSphere</span>
            </div>
        </div>
        <nav id="mobileNav" class="mobile-nav">
            <ul>
                <li><a href="#" onclick="showSection('menuSection')"><i class="fas fa-home"></i> Home</a></li>
            </ul>
        </nav>
    </header>

    <div class="container" id="menuSection">
        <div class="hero">
            <h1>Welcome to SafeSphere</h1>
            <p>Your trusted platform for safety reviews and community insights</p>
        </div>
        
        <div class="card-grid">
            <div class="card" onclick="showSection('profileSection')">
                <i class="fas fa-user-circle"></i>
                <h3>Personal Details</h3>
                <p>Manage your profile and favorite contacts</p>
            </div>
            
            <div class="card" onclick="showSection('searchSection')">
                <i class="fas fa-map-marker-alt"></i>
                <h3>Search Reviews</h3>
                <p>Find safety information about any location</p>
            </div>
            
            <div class="card" onclick="showSection('reviewSection')">
                <i class="fas fa-star"></i>
                <h3>Post Review</h3>
                <p>Share your experience to help others</p>
            </div>
            
            <div class="card" onclick="showSection('gestureSection')">
                <i class="fas fa-hand-paper"></i>
                <h3>Gesture SOS</h3>
                <p>Configure and test emergency gesture alerts</p>
            </div>
        </div>
        
        <div class="recent-reviews">
            <h2>Recent Safety Reviews</h2>
            <div id="recentReviewsList"></div>
        </div>
    </div>

    <!-- Personal Details Section -->
    <div class="container hidden" id="profileSection">
        <h2>My Profile</h2>
        <div class="form-container">
            <div class="form-group">
                <label for="nameInput">Full Name</label>
                <input type="text" id="nameInput" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label for="emailInput">Email Address</label>
                <input type="email" id="emailInput" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="phoneInput">Phone Number</label>
                <input type="tel" id="phoneInput" placeholder="Enter your phone number">
            </div>
            <button onclick="registerUser()" class="btn-primary">Save Details</button>
            <button onclick="showSection('menuSection')" class="btn-secondary">Cancel</button>
        </div>
    </div>
    
    <!-- Search Section -->
    <div class="container hidden" id="searchSection">
        <h2>Search Safety Reviews</h2>
        <div id="searchContainer" class="search-container">
            <input type="text" id="searchInput" placeholder="Enter a location name...">
        </div>
        <div id="searchResults" class="search-results">
            <div class="empty-state">
                <p>Enter a location name to search for safety reviews.</p>
            </div>
        </div>
    </div>
    
    <!-- Review Section -->
    <div class="container hidden" id="reviewSection">
        <h2>Share Your Safety Experience</h2>
        <div class="form-container">
            <div class="form-group">
                <label for="locationInput">Location Name</label>
                <input type="text" id="locationInput" placeholder="Enter the location name">
            </div>
            <div class="form-group">
                <label for="reviewInput">Your Experience</label>
                <textarea id="reviewInput" rows="5" placeholder="Describe your safety experience at this location..."></textarea>
            </div>
            <div class="form-group">
                <label for="ratingInput">Safety Rating</label>
                <div id="ratingDisplay" class="rating-display">
                    <i class="fas fa-shield-alt"></i>
                    <i class="fas fa-shield-alt"></i>
                    <i class="fas fa-shield-alt"></i>
                    <i class="fas fa-shield-alt"></i>
                    <i class="fas fa-shield-alt"></i>
                </div>
                <input type="hidden" id="ratingInput" value="3">
            </div>
            <button onclick="submitReview()" class="btn-primary">Submit Review</button>
            <button onclick="showSection('menuSection')" class="btn-secondary">Cancel</button>
        </div>
    </div>
    
    <!-- Emergency Contacts Section -->
    <div class="container hidden" id="contactsSection">
        <h2>Emergency Contacts</h2>
        <div id="contactList" class="contact-list">
            <!-- Contacts will be loaded here -->
        </div>
        <button onclick="accessContacts()" class="btn-primary">Load Contacts</button>
        <button onclick="showSection('menuSection')" class="btn-secondary">Back to Menu</button>
    </div>
    
    <!-- Gesture Section -->
    <div class="container hidden" id="gestureSection">
        <h2>Emergency Gesture Detection</h2>
        <p class="instruction">Draw an "S" shape with your device to trigger an emergency alert</p>
        
        <div class="gesture-container">
            <canvas id="gestureCanvas" width="300" height="300"></canvas>
            <div id="gestureOutput" class="gesture-output">Draw a gesture to test</div>
        </div>
        
        <div class="controls">
            <button id="startGestureBtn" class="btn-primary">Start Detection</button>
            <button id="stopGestureBtn" class="btn-secondary" disabled>Stop Detection</button>
        </div>
        
        <div class="settings">
            <h3>Gesture Settings</h3>
            <div class="form-group">
                <label for="sensitivityInput">Detection Sensitivity</label>
                <input type="range" id="sensitivityInput" min="1" max="10" value="5">
                <span id="sensitivityValue">Medium</span>
            </div>
        </div>
        
        <button onclick="showSection('menuSection')" class="btn-secondary">Back to Menu</button>
    </div>
    
    <footer>
        <p>&copy; 2025 SafeSphere - Making communities safer together</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
