<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motion Detection WebApp</title>
</head>
<body>
    <h2>Motion Detection</h2>
    <p>X: <span id="x">0</span></p>
    <p>Y: <span id="y">0</span></p>
    <p>Z: <span id="z">0</span></p>
    <p>Status: <span id="status">No motion detected</span></p>

    <button onclick="requestMotionPermission()">Enable Motion</button>

    <script>
        let motionDetected = false;

        function requestMotionPermission() {
            if (typeof DeviceMotionEvent.requestPermission === "function") {
                DeviceMotionEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === "granted") {
                            startMotionTracking();
                        } else {
                            alert("Motion permission denied. Enable motion access in browser settings.");
                        }
                    })
                    .catch(console.error);
            } else {
                startMotionTracking();
            }
        }

        function startMotionTracking() {
            if (!window.DeviceMotionEvent) {
                alert("DeviceMotionEvent is not supported on this device.");
                return;
            }

            function simulateMotion() {
    let x = (Math.random() * 2 - 1) * 9.8; // Random tilt simulation
    let y = (Math.random() * 2 - 1) * 9.8;
    let z = 9.8 + (Math.random() - 0.5) * 2; // Simulate gravity effect

    document.getElementById("x").innerText = x.toFixed(2);
    document.getElementById("y").innerText = y.toFixed(2);
    document.getElementById("z").innerText = z.toFixed(2);

    let accelerationMagnitude = Math.sqrt(x*x + y*y + z*z);
    if (accelerationMagnitude > 15) {
        document.getElementById("status").innerText = "⚠️ Simulated Motion Alert Sent!";
        sendAlertToServer(accelerationMagnitude);
    }
}
        }

// Call this function every second to simulate movement
setInterval(simulateMotion, 1000);


        function sendAlertToServer(motionValue) {
            let alertData = {
                message: "High motion detected!",
                acceleration: motionValue,
                timestamp: new Date().toISOString()
            };

            fetch("https://your-security-website.com/api/alert", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(alertData)
            })
            .then(response => response.json())
            .then(data => console.log("Alert sent successfully:", data))
            .catch(error => console.error("Error sending alert:", error));
        }
    </script>
</body>
</html>

